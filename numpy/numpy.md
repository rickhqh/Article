# numpy

## 1.Numpy介绍





NumPy中文官网
NumPy（Numerical Python）是一个开源的Python科学计算库，用于快速处理任意维度的数组。
NumPy支持常见的数组和矩阵操作。对于同样的数值计算任务，使用Numpy比直接使用Python要简洁        的多。
NumPy使用ndarray对象来处理多维数组，该对象是一个快速而灵活的大数据容器。
## 2.为什么要学NumPy


1.快速
2.方便
3.科学计算的基础库

## 3.NumPy的优势
持续为泛互联网人才赋能	2

对于同样的数值计算任务，使用NumPy要比直接编写Python代码便捷得多；
NumPy中的数组的存储效率和输入输出性能均远远优于Python中等价的基本数据结构，且其能够提升的性能是与数组中的元素成比例的；
NumPy的大部分代码都是用C语言写的，其底层算法在设计时就有着优异的性能，这使得NumPy
比纯Python代码高效得多

## 4.NumPy 的Ndarray 对象

NumPy 最重要的一个特点是其 N 维数组对象 ndarray，它是一系列同类型数据的集合，以 0 下标为开始进行集合中元素的索引。ndarray 对象是用于存放同类型元素的多维数组。



```python
import numpy as np 
list1 = [1,2,3,4]
print(type(list1))
oneArray = np.array(list1)
print(type(oneArray))
print(oneArray)

# 创建数组的多种形式
# 1. 直接传入列表的方式
t1 = np.array([1,2,3]) 
print(t1)
print(type(t1))
```

    <class 'list'>
    <class 'numpy.ndarray'>
    [1 2 3 4]
    [1 2 3]
    <class 'numpy.ndarray'>



```python
# 2. 传入range生成序列
t2 = np.array(range(10)) 
print(t2) 
print(type(t2))

# 3. 使用numpy自带的np.arange()生成数组
t3 = np.arange(0,10,2) 
print(t3) 
print(type(t3))
```

    [0 1 2 3 4 5 6 7 8 9]
    <class 'numpy.ndarray'>
    [0 2 4 6 8]
    <class 'numpy.ndarray'>



```python
import numpy as np
list2 = [[1,2],[3,4],[5,6]]


twoArray = np.array(list2) 
twoArray
```




    array([[1, 2],
           [3, 4],
           [5, 6]])



## 创建方法

zero() 返回0 
ones()
linespace() 行距 一维的等差数列数组
arange()
random系列


```python
import numpy as np
np.zeros((2,1))
```




    array([[0.],
           [0.]])




```python
import numpy as np
np.ones((3,1))
```




    array([[1.],
           [1.],
           [1.]])




```python
np.linspace(0,100,num=20) #一维的等差数列数组
```




    array([  0.        ,   5.26315789,  10.52631579,  15.78947368,
            21.05263158,  26.31578947,  31.57894737,  36.84210526,
            42.10526316,  47.36842105,  52.63157895,  57.89473684,
            63.15789474,  68.42105263,  73.68421053,  78.94736842,
            84.21052632,  89.47368421,  94.73684211, 100.        ])




```python
np.arange(10,20,2)#开始 结束 步长
```




    array([10, 12, 14, 16, 18])



## 常用属性
shape
ndim
size
dtype


```python
arr = np.random.randint(0,100,size=(4,6))
arr
```




    array([[48, 36, 35, 18, 31, 10],
           [97, 98, 32, 96, 80, 65],
           [93, 75, 74, 43, 61, 99],
           [65, 17, 33, 11, 73, 43]])




```python
arr.shape
```




    (4, 6)




```python
arr.ndim #返回的是数组的维度
```




    2




```python
arr.size
```




    24




```python
arr.dtype
```




    dtype('int32')



numpy的数据类型
array(dtype=?):可以设定数据类型
arr.dtype = '?':可以修改数据类型image.png

np.bool	用一个字节存储的布尔类型（True或False）	'b'
np.int8	一个字节大小，-128 至 127 （一个字节）	'i'
np.int16	整数，-32768 至 32767 （2个字节）	'i2'
np.int32	整数，-2 31 至 2 32 -1 （4个字节）	'i4'
np.int64	整数，-2 63 至 2 63 - 1 （8个字节）	'i8'
np.uint8	无符号整数，0 至 255	'u'
np.uint16	无符号整数，0 至 65535	'u2'
np.uint32	无符号整数，0 至 2 ** 32 - 1	'u4'
np.uint64	无符号整数，0 至 2 ** 64 - 1	'u8'
np.ﬂoat16	半精度浮点数：16位，正负号1位，指数5位，精度10位	'f2'
np.ﬂoat32	单精度浮点数：32位，正负号1位，指数8位，精度23位	'f4'
np.ﬂoat64	双精度浮点数：64位，正负号1位，指数11位，精度52位	'f8'
np.complex64	复数，分别用两个32位浮点数表示实部和虚部	'c8'
np.complex128	复数，分别用两个64位浮点数表示实部和虚部	'c16'
np.object_	python对象	'O'
np.string_	字符串	'S'
np.unicode_	unicode类型	'U'

arr = np.array([1,2,3])
arr.dtype


```python
#创建一个数组，指定数组元素类型为int32
arr = np.array([1,2,3],dtype='int32')

arr.dtype
```




    dtype('int32')



## numpy的索引和切片操作（重点)


```python
arr1=np.arange(20,100,2)
arr1
```




    array([20, 22, 24, 26, 28, 30, 32, 34, 36, 38, 40, 42, 44, 46, 48, 50, 52,
           54, 56, 58, 60, 62, 64, 66, 68, 70, 72, 74, 76, 78, 80, 82, 84, 86,
           88, 90, 92, 94, 96, 98])




```python
arr1.size
```




    40




```python
arr1=arr1.reshape(5,8)
```


```python
arr1[[1,3,4]]#取出多行
```




    array([[36, 38, 40, 42, 44, 46, 48, 50],
           [68, 70, 72, 74, 76, 78, 80, 82],
           [84, 86, 88, 90, 92, 94, 96, 98]])



切片操作
切出前两列数据
切出前两行数据
切出前两行的前两列的数据
数组数据翻转
练习：将一张图片上下左右进行翻转操作
练习：将图片进行指定区域的裁剪 


```python
#切出arr数组的前两行的数据
arr1[0:2] #arr[行切片]
```




    array([[20, 22, 24, 26, 28, 30, 32, 34],
           [36, 38, 40, 42, 44, 46, 48, 50]])




```python
#切出arr数组中的前两列
arr1[:,0:2] #arr[行切片,列切片]
```




    array([[20, 22],
           [36, 38],
           [52, 54],
           [68, 70],
           [84, 86]])




```python
#切出前两行的前两列的数据
arr1[0:2,0:2]
```




    array([[20, 22],
           [36, 38]])




```python
#将数组的行倒置
print(arr1)
arr1[::-1]
```

    [[20 22 24 26 28 30 32 34]
     [36 38 40 42 44 46 48 50]
     [52 54 56 58 60 62 64 66]
     [68 70 72 74 76 78 80 82]
     [84 86 88 90 92 94 96 98]]





    array([[84, 86, 88, 90, 92, 94, 96, 98],
           [68, 70, 72, 74, 76, 78, 80, 82],
           [52, 54, 56, 58, 60, 62, 64, 66],
           [36, 38, 40, 42, 44, 46, 48, 50],
           [20, 22, 24, 26, 28, 30, 32, 34]])




```python
#将一张图片进行左右翻转
import matplotlib.pyplot as plt
img_arr = plt.imread('./1.jpg')
plt.imshow(img_arr)
```




    <matplotlib.image.AxesImage at 0x1c8ede80cd0>




![png](https://cdn.jsdelivr.net/gh/rickhqh/pic/img/202204182313095.png)
    



```python
plt.imshow(img_arr[:,::-1,:])#img_arr[行，列，颜色]
```




    <matplotlib.image.AxesImage at 0x1c8f17150d0>




​    
![png](https://cdn.jsdelivr.net/gh/rickhqh/pic/img/202204182314649.png)
​    



```python
#图片裁剪的功能
plt.imshow(img_arr[100:500,100b300,:])
```




    <matplotlib.image.AxesImage at 0x1c8f2132190>




​    
![png](https://cdn.jsdelivr.net/gh/rickhqh/pic/img/202204182314743.png)
​    



```python
import numpy as np
t1 = np.arange(24).reshape(4,6) 
print(t1)
print('*'*20)
print(t1[1]) # 取一行(一行代表是一条数据，索引也是从0开始的) print(t1[1,:]) # 取一行
print('*'*20)
print(t1[1:])# 取连续的多行
print('*'*20)
print(t1[1:3,:])# 取连续的多行
print('*'*20)
print(t1[[0,2,3]])# 取不连续的多行
print('*'*20)
print(t1[[0,2,3],:])# 取不连续的多行
print('*'*20)
print(t1[:,1])# 取一列
print('*'*20)
print(t1[:,1:])# 连续的多列print(t1[:,[0,2,3]])# 取不连续的多列print(t1[2,3])# # 取某一个值,三行四列
print('*'*20)
print(t1[[0,1,1],[0,1,3]])# 取多个不连续的值，[[行，行。。。],[列，列。。。]]
```

    [[ 0  1  2  3  4  5]
     [ 6  7  8  9 10 11]
     [12 13 14 15 16 17]
     [18 19 20 21 22 23]]
    ********************
    [ 6  7  8  9 10 11]
    ********************
    [[ 6  7  8  9 10 11]
     [12 13 14 15 16 17]
     [18 19 20 21 22 23]]
    ********************
    [[ 6  7  8  9 10 11]
     [12 13 14 15 16 17]]
    ********************
    [[ 0  1  2  3  4  5]
     [12 13 14 15 16 17]
     [18 19 20 21 22 23]]
    ********************
    [[ 0  1  2  3  4  5]
     [12 13 14 15 16 17]
     [18 19 20 21 22 23]]
    ********************
    [ 1  7 13 19]
    ********************
    [[ 1  2  3  4  5]
     [ 7  8  9 10 11]
     [13 14 15 16 17]
     [19 20 21 22 23]]
    ********************
    [0 7 9]


## 变形reshape


```python
arr=np.random.randint(10,100,size=(5,6))
arr
```




    array([[27, 64, 23, 89, 28, 22],
           [47, 30, 77, 45, 68, 78],
           [75, 99, 35, 39, 44, 65],
           [93, 29, 79, 36, 32, 52],
           [21, 62, 96, 34, 73, 45]])




```python
arr.reshape(30,)#将二维的数组变形成1维
```




    array([27, 64, 23, 89, 28, 22, 47, 30, 77, 45, 68, 78, 75, 99, 35, 39, 44,
           65, 93, 29, 79, 36, 32, 52, 21, 62, 96, 34, 73, 45])




```python
#将一维变形成多维
arr.reshape((6,5))
```




    array([[27, 64, 23, 89, 28],
           [22, 47, 30, 77, 45],
           [68, 78, 75, 99, 35],
           [39, 44, 65, 93, 29],
           [79, 36, 32, 52, 21],
           [62, 96, 34, 73, 45]])



## 级联操作 concatenate 连接
- 将多个numpy数组进行横向或者纵向的拼接
axis轴向的理解
0:列
1:行
问题：
级联的两个数组维度一样，但是行列个数不一样会如何？


```python
np.concatenate((arr,arr),axis=1)
```




    array([[27, 64, 23, 89, 28, 22, 27, 64, 23, 89, 28, 22],
           [47, 30, 77, 45, 68, 78, 47, 30, 77, 45, 68, 78],
           [75, 99, 35, 39, 44, 65, 75, 99, 35, 39, 44, 65],
           [93, 29, 79, 36, 32, 52, 93, 29, 79, 36, 32, 52],
           [21, 62, 96, 34, 73, 45, 21, 62, 96, 34, 73, 45]])




```python
arr1=np.random.randint(10,100,(3,6))
arr1
```




    array([[95, 79, 51, 17, 96, 40],
           [89, 19, 89, 37, 12, 84],
           [13, 60, 55, 25, 10, 31]])




```python
np.concatenate((arr,arr1),axis=0)
```




    array([[27, 64, 23, 89, 28, 22],
           [47, 30, 77, 45, 68, 78],
           [75, 99, 35, 39, 44, 65],
           [93, 29, 79, 36, 32, 52],
           [21, 62, 96, 34, 73, 45],
           [95, 79, 51, 17, 96, 40],
           [89, 19, 89, 37, 12, 84],
           [13, 60, 55, 25, 10, 31]])




```python
arr_3 = np.concatenate((img_arr,img_arr,img_arr),axis=0)
plt.imshow(arr_3)
```




    <matplotlib.image.AxesImage at 0x1c8f2e460a0>




​    
![png](https://cdn.jsdelivr.net/gh/rickhqh/pic/img/202204182314142.png)
​    


## 常用的聚合操作
sum,max,min,mean


```python
arr
```




    array([[27, 64, 23, 89, 28, 22],
           [47, 30, 77, 45, 68, 78],
           [75, 99, 35, 39, 44, 65],
           [93, 29, 79, 36, 32, 52],
           [21, 62, 96, 34, 73, 45]])




```python
arr.sum(axis=1)
```




    array([253, 345, 357, 321, 331])




```python
arr.sum(axis=0) #列`
```




    array([263, 284, 310, 243, 245, 262])




```python
arr.max()
```




    99




```python
arr.max(axis=1)
```




    array([89, 78, 99, 93, 96])



## 常用的数学函数
NumPy 提供了标准的三角函数：sin()、cos()、tan()
numpy.around(a,decimals) 函数返回指定数字的四舍五入值。
参数说明：
a: 数组
decimals: 舍入的小数位数。 默认值为0。 如果为负，整数将四舍五入到小数点左侧的位置


```python
np.sin(2.5)
```




    0.5984721441039564




```python
np.around(3.23,1)
```




    3.2



## 常用的统计函数
numpy.amin() 和 numpy.amax()，用于计算数组中的元素沿指定轴的最小、最大值。

numpy.ptp():计算数组中元素最大值与最小值的差（最大值 - 最小值）。

numpy.median() 函数用于计算数组 a 中元素的中位数（中值）

标准差std():标准差是一组数据平均值分散程度的一种度量。

公式：std = sqrt(mean((x - x.mean())**2))

如果数组是 [1，2，3，4]，则其平均值为 2.5。 因此，差的平方是 [2.25,0.25,0.25,2.25]，并且其平均值的平方根除以 4，即 sqrt(5/4) ，结果为 1.1180339887498949。


方差var()：统计中的方差（样本方差）是每个样本值与全体样本值的平均数之差的平方值的平均数，即 mean((x - x.mean())** 2)。换句话说，标准差是方差的平方根。


```python
arr[1].std()
```




    17.95132307101624




```python
arr[1].var()
```




    322.25



## 矩阵相关

NumPy 中包含了一个矩阵库 numpy.matlib，
该模块中的函数返回的是一个矩阵，而不是 ndarray 对象。

一个 的矩阵是一个由行（row）列（column）元素排列成的矩形阵列。

numpy.matlib.identity() 函数返回给定大小的单位矩阵。

单位矩阵是个方阵，从左上角到右下角的对角线（称为主对角线）上的元素均为 1，除此以外全都为 0。


```python
np.eye(6)
```




    array([[1., 0., 0., 0., 0., 0.],
           [0., 1., 0., 0., 0., 0.],
           [0., 0., 1., 0., 0., 0.],
           [0., 0., 0., 1., 0., 0.],
           [0., 0., 0., 0., 1., 0.],
           [0., 0., 0., 0., 0., 1.]])




```python
arr.T# 转置矩阵
```




    array([[27, 47, 75, 93, 21],
           [64, 30, 99, 29, 62],
           [23, 77, 35, 79, 96],
           [89, 45, 39, 36, 34],
           [28, 68, 44, 32, 73],
           [22, 78, 65, 52, 45]])



## 矩阵相乘
- numpy.dot(a, b, out=None)
-a : ndarray 数组
-b : ndarray 数组



```python
a1 = np.array([[2,1],[4,3]])
a2 = np.array([[1,2],[1,0]])
np.dot(a1,a2)
```




    array([[3, 4],
           [7, 8]])

